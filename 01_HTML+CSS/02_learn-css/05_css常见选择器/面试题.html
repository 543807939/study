<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        /* 
            ## 笔试题

                请使用JavaScript实现函数：

                ``` javascript
                function sumByType(arr) {
                }
                ```

                参数是一个对象数组，数组中的每个对象有type: string和value: number两个字段。
                要求把type相同的对象合并起来，它们的value相加，并将结果数组返回。
                返回结果的顺序没有关系。

                举例：
                参数：`[{type: 'a', value: 1}, {type: 'b', value: 2}, {type: 'a', value: 3}, {type: 'b', value: 4}]`

                返回：`[{type: 'a', value: 4}, {type: 'b', value: 6}]` 或 `[{type: 'b', value: 6}, {type: 'a', value: 4}]`均可

                除代码外，用一小段注释（长度随意）简述你的做法，并增加若干测试用例
        */

        function sumByType(arr) {
            // 创建一个新的数组保存数组
            const list = []
            // 遍历原数组
            arr.forEach(item => {
                // 找一下结果数组中有没有类型和该项的类型一样
                let res = list.find(i => {
                    return i.type === item.type
                })
                // 如果一样 则把结果数组的这项的value加上当前遍历项的value
                if (res) {
                    res.value += item.value
                    // 这里进行合并
                    res = {
                        ...item,
                        ...res
                    }
                } else {
                    // 如果没有,则说明这一项是新鲜的  放到结果数组中
                    list.push(item)
                }
            });
            return list
        }

        console.log(sumByType([{
            type: 'a',
            value: 1
        }, {
            type: 'b',
            value: 2
        }, {
            type: 'a',
            value: 3
        }, {
            type: 'b',
            value: 4
        }]));


        console.log(sumByType([{
            type: 'a',
            value: 1
        }, {
            type: 'b',
            value: 2
        }, {
            type: 'a',
            value: 3
        }, {
            type: 'b',
            value: 4
        }, {
            type: 'c',
            value: 1
        }, {
            type: 'b',
            value: 20
        }]));
        console.log(sumByType([{
            type: 'd',
            value: 1
        }, {
            type: 'b',
            value: 2
        }, {
            type: 'a',
            value: 3
        }, {
            type: 'b',
            value: 4
        }, {
            type: 'c',
            value: 1
        }, {
            type: 'b',
            value: 20
        }, {
            type: 'd',
            value: 3
        }]));
    </script>
</body>

</html>