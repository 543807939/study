<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./css/reset.css" />
    <link rel="stylesheet" href="./css/common.css" />
    <link rel="stylesheet" href="./css/main-news.css" />
  </head>

  <body>
    <div class="main wrapper_03">
      <div class="main-news">
        <div class="banner">
          <ul class="image-list">
            <li class="item">
              <a href="#"><img src="./images/banner-img-1.jpeg" /></a>
            </li>
            <li class="item">
              <a href="#"><img src="./images/banner-img-2.jpeg" /></a>
            </li>
            <li class="item">
              <a href="#"><img src="./images/banner-img-3.jpeg" /></a>
            </li>
            <li class="item">
              <a href="#"><img src="./images/banner-img-4.jpeg" /></a>
            </li>
            <li class="item">
              <a href="#"><img src="./images/banner-img-5.jpeg" /></a>
            </li>
          </ul>
          <ul class="title-list">
            <li class="item active"><a href="#">全国大赛总决赛</a></li>
            <li class="item"><a href="#">千色云中</a></li>
            <li class="item"><a href="#">战至巅峰</a></li>
            <li class="item"><a href="#">赛年动画解读</a></li>
            <li class="item"><a href="#">大神教你玩</a></li>
          </ul>
        </div>
        <div class="news">
          <ul class="title-list">
            <li><a href="#">热门</a></li>
            <li><a href="#">新闻</a></li>
            <li><a href="#">公告</a></li>
            <li><a href="#">活动</a></li>
            <li><a href="#">赛事</a></li>
            <li><a href="#">...</a></li>
          </ul>
          <p class="notice">
            <a href="#">6月23日正式服“沙海飞舟”版本更新公告</a>
          </p>
          <ul class="news-list">
            <li class="item">
              <a href="#" class="des news_type news_type_hot">
                狄某有话说| 莫名其妙就消极？罚！ </a
              ><span class="date">06/24</span>
            </li>
            <li class="item">
              <a href="#" class="des news_type news_type_hot">
                元歌-无心源·梦皮肤局外场景票选结果公布 </a
              ><span class="date">06/24</span>
            </li>
            <li class="item">
              <a href="#" class="des news_type news_type_hot">
                【限时开启】皮肤签名红包上线 </a
              ><span class="date">06/24</span>
            </li>
            <li class="item">
              <a href="#" class="des news_type news_type_hot">
                新赛季！立即开启大神视角 </a
              ><span class="date">06/24</span>
            </li>
            <li class="item">
              <a href="#" class="des news_type news_type_hot">
                元歌源·梦皮肤展示场景投票活动开启公告 </a
              ><span class="date">06/24</span>
            </li>
            <li class="item">
              <a href="#" class="des news_type news_type_notice">
                6月16日抢先服版本更新公告 </a
              ><span class="date">06/24</span>
            </li>
            <li class="item">
              <a href="#" class="des news_type news_type_notice">
                6月15日全服不停机更新公告 </a
              ><span class="date">06/24</span>
            </li>
          </ul>
        </div>
        <div class="download">
          <a href="#" class="download-btn"></a>
          <a href="#" class="guard-btn"></a>
          <a href="#" class="experience-btn"></a>
        </div>
      </div>
    </div>
    <script>
      const banner = document.querySelector(".banner");

      const titleList = banner.querySelector(".title-list");
      const imgList = document.querySelector(".image-list");
      // 当前活跃的一个
      let activeItem = titleList.querySelector(".active")?.children[0];
      // 当前活跃的索引
      let activeIndex = 0;
      // 定时器
      let timer = null;

      function switchBanner() {
        imgList.style.transform = `translateX(${-activeIndex * 605}px)`;
        activeItem?.parentNode.classList.remove("active");
        titleList.children[activeIndex].classList.add("active");
        activeItem = titleList.children[activeIndex].querySelector("a");
      }

      function toggleImage(e) {
        const parentItem = e.target.parentNode;

        // 记录当前活跃的索引
        activeIndex = Array.from(titleList.querySelectorAll(".item")).findIndex(
          (item) => {
            return item === parentItem;
          }
        );
        switchBanner();
      }

      titleList.addEventListener("mouseover", toggleImage);

      // 自动轮播功能
      function autoPlay() {
        if (activeIndex >= imgList.children.length) {
          activeIndex = 0;
        }
        switchBanner();
        activeIndex++;
      }

      timer = setInterval(autoPlay, 1000);

      banner.addEventListener("mouseover", () => {
        if (timer) {
          clearInterval(timer);
        }
      });
      banner.addEventListener("mouseout", () => {
        timer = setInterval(autoPlay, 1000);
      });
    </script>
  </body>
</html>
